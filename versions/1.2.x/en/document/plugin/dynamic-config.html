<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Dynamic Configuration | Sermant</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/versions/1.2.x/img/logo.svg">
    <meta name="description" content="A Proxyless Service Mesh Solution Based on JavaAgent">
    
    <link rel="preload" href="/versions/1.2.x/assets/css/0.styles.f6dcac6f.css" as="style"><link rel="preload" href="/versions/1.2.x/assets/js/app.d31cc94c.js" as="script"><link rel="preload" href="/versions/1.2.x/assets/js/3.2e41a223.js" as="script"><link rel="preload" href="/versions/1.2.x/assets/js/1.b15421ba.js" as="script"><link rel="preload" href="/versions/1.2.x/assets/js/45.4533e693.js" as="script"><link rel="preload" href="/versions/1.2.x/assets/js/15.e73a6d7c.js" as="script"><link rel="prefetch" href="/versions/1.2.x/assets/js/10.bb21a065.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/100.63eb491e.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/101.1209cd4e.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/102.7db03555.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/103.a5520c78.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/11.60305907.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/12.34d38cf9.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/13.5e6982ae.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/14.d03e87cb.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/16.fec41699.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/17.61aafeab.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/18.0eeef45d.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/19.922def51.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/20.7aa203e0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/21.394b4032.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/22.6aa5d3f8.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/23.bb8a9863.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/24.b1986c4b.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/25.aec95c9e.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/26.6f96e608.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/27.10d837fc.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/28.3ce4cf00.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/29.4f5a0b40.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/30.13e02089.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/31.d6004839.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/32.5c1bfb7d.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/33.fef82b59.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/34.627142c5.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/35.a41cd9d8.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/36.6ecca7fc.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/37.f6410d29.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/38.8943d9da.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/39.d4b554bd.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/4.e3cce00f.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/40.73ffc2c6.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/41.1b6892f7.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/42.6302952a.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/43.3d48c843.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/44.85677e77.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/46.1fa5d6a8.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/47.42fdcf13.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/48.cf7a66f2.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/49.b98271d3.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/5.1513b1e3.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/50.a5a182ae.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/51.784d25c0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/52.c12d736c.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/53.b6cd505a.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/54.30d4b0c0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/55.c6a1a220.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/56.d64cfc94.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/57.03a71448.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/58.1bb39475.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/59.fcd252b7.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/6.564e5073.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/60.757068b7.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/61.218d4912.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/62.2a166985.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/63.645c8dd7.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/64.d6207e9d.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/65.3286715f.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/66.f33019c0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/67.df5927ee.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/68.b00a7a7a.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/69.05f6bfb0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/7.c34496d9.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/70.401bed71.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/71.27bc2a53.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/72.c7f971e4.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/73.e5720a99.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/74.e63e199c.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/75.36d0bb5f.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/76.da14e89a.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/77.83d23f50.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/78.126138f8.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/79.b9d84001.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/8.2c82eb99.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/80.97aaf487.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/81.e4cf577f.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/82.93eceda0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/83.649f9ea6.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/84.755569cb.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/85.a8cef901.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/86.c91d7be0.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/87.8f07c12d.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/88.13d8018f.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/89.36454066.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/9.e914bb1e.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/90.551be0f4.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/91.38efe266.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/92.36c5d6a9.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/93.f5030432.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/94.a79fe2b3.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/95.2d1d8acf.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/96.ee10329c.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/97.e4c55a56.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/98.8a380b0c.js"><link rel="prefetch" href="/versions/1.2.x/assets/js/99.5dd97d8d.js">
    <link rel="stylesheet" href="/versions/1.2.x/assets/css/0.styles.f6dcac6f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/versions/1.2.x/en/" class="home-link router-link-active"><img src="/versions/1.2.x/img/sermant-logo.png" alt="Sermant" class="logo"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/versions/1.2.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/1.2.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/huaweicloud/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/1.2.x/zh/document/plugin/dynamic-config.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/1.2.x/en/document/plugin/dynamic-config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/versions/1.2.x/en/document/" class="nav-link">
  Document
</a></div><div class="nav-item"><a href="/versions/1.2.x/en/blog/" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="https://github.com/huaweicloud/Sermant" target="_blank" class="nav-link external">
  Github
  <!----></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Languages" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/versions/1.2.x/zh/document/plugin/dynamic-config.html" class="nav-link">
  简体中文
</a></li><li class="dropdown-item"><!----> <a href="/versions/1.2.x/en/document/plugin/dynamic-config.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li></ul></div></div> <div class="nav-item"><!----></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Start</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>User Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Plugin Guide</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/versions/1.2.x/en/document/plugin/" aria-current="page" class="sidebar-link">Plugin</a></li><li><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html" aria-current="page" class="active sidebar-link">Dynamic Configuration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html#parameter-configuration" class="sidebar-link">Parameter configuration</a></li><li class="sidebar-sub-header"><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html#detailed-governance-rules" class="sidebar-link">Detailed Governance Rules</a></li><li class="sidebar-sub-header"><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html#supported-versions-and-limitations" class="sidebar-link">Supported Versions and Limitations</a></li><li class="sidebar-sub-header"><a href="/versions/1.2.x/en/document/plugin/dynamic-config.html#operation-and-result-validation" class="sidebar-link">Operation and result validation</a></li></ul></li><li><a href="/versions/1.2.x/en/document/plugin/flowcontrol.html" class="sidebar-link">FlowControl</a></li><li><a href="/versions/1.2.x/en/document/plugin/graceful.html" class="sidebar-link">Graceful Online/Offline</a></li><li><a href="/versions/1.2.x/en/document/plugin/loadbalancer.html" class="sidebar-link">Load balancing</a></li><li><a href="/versions/1.2.x/en/document/plugin/monitor.html" class="sidebar-link">Monitoring</a></li><li><a href="/versions/1.2.x/en/document/plugin/router.html" class="sidebar-link">Tag Router</a></li><li><a href="/versions/1.2.x/en/document/plugin/register-migration.html" class="sidebar-link">Service-Registry</a></li><li><a href="/versions/1.2.x/en/document/plugin/springboot-registry.html" class="sidebar-link">SpringBoot Registry</a></li><li><a href="/versions/1.2.x/en/document/plugin/visibility.html" class="sidebar-link">Service visibility</a></li><li><a href="/versions/1.2.x/en/document/plugin/removal.html" class="sidebar-link">Outlier instance removal</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developer Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Community Guide</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dynamic-configuration"><a href="#dynamic-configuration" class="header-anchor">#</a> Dynamic Configuration</h1> <p>This article describes how to use the <a href="https://github.com/huaweicloud/Sermant/tree/develop/sermant-plugins/sermant-dynamic-config" target="_blank" rel="noopener noreferrer">Dynamic Configuration Plugin<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <p>This plugin implements dynamic configuration based on the Sermant configuration center capability. During running, the configuration can be updated to the host application. The priority of the plugin is higher than that of the environment variable configuration.</p> <h2 id="parameter-configuration"><a href="#parameter-configuration" class="header-anchor">#</a> Parameter configuration</h2> <h3 id="sermant-agent-configurations"><a href="#sermant-agent-configurations" class="header-anchor">#</a> Sermant-agent Configurations</h3> <p>The dynamic configuration plug-in depends on the dynamic configuration center. It is necessary to configure the address of the dynamic configuration center (<code>dynamic.config.serverAddress</code>) and the type of the dynamic configuration center (<code>dynamic.config.dynamicConfigType</code>) in Sermant-agent. For details, refer to <a href="/versions/1.2.x/en/document/user-guide/sermant-agent.html#sermant-agent-parameter-configuration">Sermant-agent User Manual</a></p> <h3 id="plugin-configurations"><a href="#plugin-configurations" class="header-anchor">#</a> Plugin Configurations</h3> <p>The dynamic configuration plugin needs to open the switches such as whether to enable the adaptive CSE (<code>dynamic. config. plugin. enableCseAdapter</code>) and whether to enable the dynamic configuration plugin (<code>dynamic. config. plugin. enableDynamicConfig</code>). The configuration file of the plug-in can be found in `${path}/Sermant-agent-x.x.x/agent/pluginPackage/dynamic-config/config/config.yaml', as shown below:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">dynamic.config.plugin</span><span class="token punctuation">:</span>
  <span class="token key atrule">enableCseAdapter</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># Whether to turn on the adaptive CSE</span>
  <span class="token key atrule">enableDynamicConfig</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Enable dynamic configuration plugin</span>
  <span class="token key atrule">enableOriginConfigCenter</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># Whether to open the original configuration center</span>
</code></pre></div><table><thead><tr><th>Parameter Key</th> <th>Description</th> <th>Default Value</th> <th>Required</th></tr></thead> <tbody><tr><td>enableCseAdapter</td> <td>Whether to turn on the adaptive CSE; <br> <strong>true</strong>:Configure subscription according to application configuration, service configuration and custom tag configuration specified by ServiceMeta；<br> <strong>false</strong>:Subscribe by service name</td> <td>true</td> <td>true</td></tr> <tr><td>enableDynamicConfig</td> <td>Enable dynamic configuration plugin</td> <td>false</td> <td>false</td></tr> <tr><td>enableOriginConfigCenter</td> <td>Whether to open the original configuration center; <br> <strong>false</strong>:Shield the original configuration center, and the configuration can only be published through Sermant; <br> <strong>true</strong>:Do not shield the original configuration center，The configuration can be distributed through the original configuration center</td> <td>false</td> <td>false</td></tr></tbody></table> <h2 id="detailed-governance-rules"><a href="#detailed-governance-rules" class="header-anchor">#</a> Detailed Governance Rules</h2> <p>The dynamic configuration plug-in publishes the configuration based on the dynamic configuration capability provided by the framework. The configuration publishing can be referred to<a href="/versions/1.2.x/en/document/user-guide/configuration-center.html">Dynamic Configuration Center User Manual</a></p> <p>Dynamic configuration is performed based on a <code>group</code>. The tag group consists of multiple key-value pairs. The value of group varies with the adaptation switch enableCseAdapter, as shown in the following figure.</p> <ul><li><p>If the adaptation function is disabled(<code>enableCseAdapter: false</code>)</p> <p>In this case, the registration plugin performs subscription according to the service name of the host application, that is, the configured <code>spring.appplicaton.name</code>. If the configured service name is <code>DynamicConfigDemo</code>, the value of the corresponding <code>group</code> is <code>service=DynamicConfigDemo</code>, where the key service is fixed. The value DynamicConfigDemo is determined by the host service name.</p></li> <li><p>If the adaptation function is enabled(<code>enableCseAdapter: true</code>)</p> <p>In this case, subscription is performed based on the <strong>application configuration, service configuration, and customized configuration</strong>. For details about the three types of configurations, see <code>${path}/sermant-agent-x.x.x/agent/config/config.properties</code>,  The related configurations are as follows:</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># application name</span>
<span class="token key attr-name">service.meta.application</span><span class="token punctuation">=</span><span class="token value attr-value">default</span>
<span class="token comment"># service version</span>
<span class="token key attr-name">service.meta.version</span><span class="token punctuation">=</span><span class="token value attr-value">1.0.0</span>
<span class="token comment"># namespace just keep default</span>
<span class="token key attr-name">service.meta.project</span><span class="token punctuation">=</span><span class="token value attr-value">default</span>
<span class="token comment"># your environment, currently, development/testing/production are supported</span>
<span class="token key attr-name">service.meta.environment</span><span class="token punctuation">=</span><span class="token value attr-value">development</span>
<span class="token comment"># Customized tags, which are configured as required for subsequent configuration subscription.</span>
<span class="token key attr-name">service.meta.customLabel</span><span class="token punctuation">=</span><span class="token value attr-value">public</span>
<span class="token key attr-name">service.meta.customLabelValue</span><span class="token punctuation">=</span><span class="token value attr-value">default</span>
</code></pre></div><p>Refer to <a href="https://support.huaweicloud.com/devg-cse/cse_devg_0020.html" target="_blank" rel="noopener noreferrer">CSE Configuration Center Overview<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for application configuration, service configuration and customized configuration description</p> <ul><li><strong>Application configuration</strong>: consists of <code>service.meta.application</code> and <code>service.meta.environment</code>. The corresponding group is <code>app=default&amp;environment=development</code>.</li> <li><strong>Service configuration</strong>: consists of <code>service.meta.application</code>, <code>service.meta.environment</code>, and <code>service name. Here, the service is spring.application.name</code>, and the corresponding group is <code>app=default&amp;environment=development&amp;service=DynamicConfigDemo</code>.</li> <li><strong>Customized configuration</strong>: consists of <code>service.meta.customLabel</code> and <code>service.meta.customLabelValue</code>. The corresponding group is <code>public=default</code>.</li></ul></li></ul> <p>The preceding describes the <code>group</code> configuration. The following describes the content configuration. Currently, the dynamic configuration supports only the YAML format. For example, the following content is configured:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8004</span>
<span class="token key atrule">sermant</span><span class="token punctuation">:</span> sermant
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> DynamicConfigDemo
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

</code></pre></div><h2 id="supported-versions-and-limitations"><a href="#supported-versions-and-limitations" class="header-anchor">#</a> Supported Versions and Limitations</h2> <h3 id="version-required"><a href="#version-required" class="header-anchor">#</a> Version Required</h3> <table><thead><tr><th>Framework</th> <th>Version</th></tr></thead> <tbody><tr><td>SpringBoot</td> <td>1.5.x - 2.6.2</td></tr> <tr><td>spring-cloud-starter-alibaba-nacos-config</td> <td>1.5.0.RELEASE+</td></tr> <tr><td>spring-cloud-starter-zookeeper-config</td> <td>1.2.0.RELEASE+</td></tr></tbody></table> <h3 id="limitations"><a href="#limitations" class="header-anchor">#</a> Limitations</h3> <p>The @Value annotation is used as an example. The @ConfigurationProperties annotation is similar.</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * @Value example
 * need use with @RefreshScope
 */</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@RefreshScope</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ValueConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${sermant}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> sermant<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> port<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;ValueConfig{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;sermant=&quot;</span> <span class="token operator">+</span> sermant <span class="token operator">+</span>
                <span class="token string">&quot;, port=&quot;</span> <span class="token operator">+</span> port <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getSermant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> sermant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="operation-and-result-validation"><a href="#operation-and-result-validation" class="header-anchor">#</a> Operation and result validation</h2> <p>The following shows how to use the dynamic configuration plugin.</p> <h3 id="preparation"><a href="#preparation" class="header-anchor">#</a> Preparation</h3> <ul><li><a href="https://github.com/huaweicloud/Sermant-examples/tree/main/flowcontrol-demo/spring-cloud-demo/spring-provider" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> Demo source code</li> <li><a href="https://github.com/huaweicloud/Sermant/releases" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> or build Sermant package</li> <li><a href="https://zookeeper.apache.org/releases#download" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and start zookeeper</li> <li><a href="https://github.com/vran-dev/PrettyZoo/releases" target="_blank" rel="noopener noreferrer">Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> PrettyZoo  and connect zookeeper</li></ul> <h3 id="step-1-compile-and-package-the-demo-application"><a href="#step-1-compile-and-package-the-demo-application" class="header-anchor">#</a> Step 1: Compile and package the demo application</h3> <p>In the <code>${path}/Sermant-examples/flowcontrol-demo/spring-cloud-demo/spring-provider</code> directory execute the following command：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># windows,Linux,mac</span>
mvn clean package
</code></pre></div><p>After successful packaging， generate <code>spring-provider.jar</code> int the <code>${path}/Sermant-examples/flowcontrol-demo/spring-cloud-demo/spring-provider/target</code> directory</p> <blockquote><p><strong>Explain</strong>： Path is the path where the demo application is downloaded</p></blockquote> <h3 id="step-2-modify-plug-in-configuration"><a href="#step-2-modify-plug-in-configuration" class="header-anchor">#</a> Step 2: Modify plug-in configuration</h3> <p>Refer to [Plug-in Configuration](#Plugin Configurations) for modification<code>${path}/sermant-agent-x.x.x/agent/pluginPackage/dynamic-config/config/config.yaml</code>：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>dynamic.config.plugin:
  enableCseAdapter: <span class="token boolean">false</span>
  enableDynamicConfig: <span class="token boolean">true</span>
  enableOriginConfigCenter: <span class="token boolean">false</span>
</code></pre></div><h3 id="step-3-start-the-demo-application"><a href="#step-3-start-the-demo-application" class="header-anchor">#</a> Step 3: Start the demo application</h3> <p>Start the demo application with the following command</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># windwos</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span><span class="token punctuation">\</span>sermant-agent-x.x.x<span class="token punctuation">\</span>agent<span class="token punctuation">\</span>sermant-agent.jar <span class="token parameter variable">-Dspring.application.name</span><span class="token operator">=</span>spring-flow-provider <span class="token parameter variable">-Dspring.cloud.zookeeper.connectString</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:2181 <span class="token parameter variable">-jar</span> spring-provider.jar

<span class="token comment">#linux mac</span>
<span class="token function">java</span> -javaagent:<span class="token variable">${path}</span>/sermant-agent-x.x.x/agent/sermant-agent.jar <span class="token parameter variable">-Dspring.application.name</span><span class="token operator">=</span>spring-flow-provider <span class="token parameter variable">-Dspring.cloud.zookeeper.connectString</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:2181 <span class="token parameter variable">-jar</span> spring-provider.jar
</code></pre></div><blockquote><p><strong>Explain</strong>：
The ${path} in the above command needs to be replaced with the actual installation path of Sermant。
x.x.x represents a certain version number of Sermant。</p></blockquote> <h3 id="step-4-view-the-original-configuration"><a href="#step-4-view-the-original-configuration" class="header-anchor">#</a> Step 4: View the original configuration</h3> <p>The browser or curl tool accesses <code>localhost: 8003/flow</code> to check whether the console log prints the <code>sermant</code> log. The effect image is as follows:</p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <h3 id="step-5-modify-the-application-configuration"><a href="#step-5-modify-the-application-configuration" class="header-anchor">#</a> Step 5: Modify the application configuration</h3> <p>Refer to <a href="/versions/1.2.x/en/document/user-guide/configuration-center.html">Dynamic Configuration Center User Manual</a></p> <p>Take Zookeeper as an example, use PrettyZoo tool to publish dynamic configuration:</p> <ol><li>create node <code>/service=spring-flow-provider</code></li></ol> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <ol start="2"><li>create node <code>/service=spring-flow-provider/config</code> and data <code>sermant: sermant1</code></li></ol> <div class="el-image"><div class="el-image__placeholder"></div><!----></div> <h3 id="verification"><a href="#verification" class="header-anchor">#</a> Verification</h3> <p>Visit <code>localhost: 8003/flow through the browser or curl tool again to check whether the console has output</code>sermant1` logs.</p> <div class="el-image"><div class="el-image__placeholder"></div><!----></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">1/5/2024, 8:37:07 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/versions/1.2.x/en/document/plugin/" class="prev router-link-active">
        Plugin
      </a></span> <span class="next"><a href="/versions/1.2.x/en/document/plugin/flowcontrol.html">
        FlowControl
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/versions/1.2.x/assets/js/app.d31cc94c.js" defer></script><script src="/versions/1.2.x/assets/js/3.2e41a223.js" defer></script><script src="/versions/1.2.x/assets/js/1.b15421ba.js" defer></script><script src="/versions/1.2.x/assets/js/45.4533e693.js" defer></script><script src="/versions/1.2.x/assets/js/15.e73a6d7c.js" defer></script>
  </body>
</html>
