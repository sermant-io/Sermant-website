(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{472:function(e,t,a){"use strict";a.r(t);var n=a(26),r=Object(n.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"dynamic-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-configuration"}},[e._v("#")]),e._v(" Dynamic Configuration")]),e._v(" "),t("p",[e._v("This document describes how the Sermant plugin uses the dynamic configuration function.")]),e._v(" "),t("p",[t("strong",[e._v("Dynamic configuration function")]),e._v(" is one of the "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/tree/develop/sermant-agentcore/sermant-agentcore-core",target:"_blank",rel:"noopener noreferrer"}},[e._v("core services of sermant-core module"),t("OutboundLink")],1),e._v(". This feature allows Sermant to pull configurations from a dynamic configuration center for rich and diverse service governance capabilities.")]),e._v(" "),t("p",[e._v("Refer to "),t("a",{attrs:{href:"https://sermant.io/en/document/user-guide/configuration-center.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sermant Dynamic Configuration Center User Manual"),t("OutboundLink")],1),e._v(" on how to use the dynamic configuration center. The following section describes how to develop dynamic-configuration-related capabilities in plugins.")]),e._v(" "),t("h2",{attrs:{id:"dynamic-configuration-api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-configuration-api"}},[e._v("#")]),e._v(" Dynamic Configuration API")]),e._v(" "),t("p",[e._v("The functionality "),t("code",[e._v("API")]),e._v(" of "),t("strong",[e._v("Dynamic Configuration Service")]),e._v(" is provided by the abstract class "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/DynamicConfigService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigService"),t("OutboundLink")],1),e._v(" , which implements three interfaces, as seen in "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/tree/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api",target:"_blank",rel:"noopener noreferrer"}},[e._v("API"),t("OutboundLink")],1),e._v(" directory, The concrete interface is as follows:：")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Interface")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Method")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Explanation")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String getConfig(String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Get the configured value for a key (default group).")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean publishConfig(String, String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Set value for a key (default group) .")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean removeConfig(String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Remove a configured value for a key (default group).")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("List<String> listKeys()")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Get all keys (default group).")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addConfigListener(String, "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add a listener for a key (default group).")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean removeConfigListener(String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Remove a listener for a key (default group).")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("String getConfig(String, String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Get the configured value for a key in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean publishConfig(String, String, String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Set value for a key in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean removeConfig(String, String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Remove the configured value for a key in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addConfigListener(String, String, "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add a listener for a key in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean removeConfigListener(String, String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Remove a listener for a key in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/GroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("GroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("List<String> listKeysFromGroup(String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Get all keys in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/GroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("GroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addGroupListener(String, "),t("a",{attrs:{href:"../../sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java"}},[e._v("DynamicConfigListener")]),e._v(")")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add listeners for all keys in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/GroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("GroupService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean removeGroupListener(String)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Remove listeners for all keys in the group.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addConfigListener(String, "),t("a",{attrs:{href:"../../sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java"}},[e._v("DynamicConfigListener")]),e._v(", boolean)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add a listener for a key(default group). Whether to trigger the initialization event depends on the input parameters")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/DynamicConfigService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addConfigListener(String, String, "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(", boolean)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add a listener for a key in the group. Whether to trigger the initialization event depends on the input parameters.")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/DynamicConfigService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigService"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("boolean addGroupListener(String, "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(", boolean)")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Add listeners for all keys in the group. Whether to trigger the initialization event depends on the input parameters.")])])])]),e._v(" "),t("p",[e._v("Above all, two concepts need to be clear:")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("Key")]),e._v(", a single reference to a dynamical configuration key")]),e._v(" "),t("li",[t("code",[e._v("Group")]),e._v(", a dynamical configuration set of groups, often used to distinguish between users")])]),e._v(" "),t("p",[e._v("As you can see, the above "),t("code",[e._v("API")]),e._v(" is mainly divided into data adding, deleting, querying and modifying operations, and add/remove operations of the listener's "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(". The latter event callback is a crucial part of the functionality of the "),t("strong",[e._v("Dynamic Configuration Service")]),e._v(", which is the main feature of the plugin using "),t("strong",[e._v("Dynamic Configuration Service")]),e._v(".")]),e._v(" "),t("p",[e._v("Also, in the "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyService"),t("OutboundLink")],1),e._v(" interface, all the "),t("code",[e._v("API")]),e._v(" defined are "),t("code",[e._v("API")]),e._v(" without "),t("code",[e._v("Group")]),e._v(". They will actually use the default "),t("code",[e._v("Group")]),e._v(" and be fixed to "),t("code",[e._v("API")]),e._v(" of "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/api/KeyGroupService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("KeyGroupService"),t("OutboundLink")],1),e._v(" in "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/DynamicConfigService.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigService"),t("OutboundLink")],1),e._v(". The default "),t("code",[e._v("Group")]),e._v(" can be modified via "),t("code",[e._v("dynamic.config.default_group")]),e._v(" in the "),t("strong",[e._v("unified configuration file")]),e._v(" "),t("code",[e._v("config.properties")]),e._v(".")]),e._v(" "),t("p",[e._v("Finally, besides the above service interfaces, there are a few other interfaces, configurations, or entities that developers need to pay attention to:")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("Static configuration "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/config/DynamicConfig.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfig"),t("OutboundLink")],1),e._v(" for "),t("strong",[e._v("Dynamic Configuration Service")]),e._v(", whose parameters configuration refers to  "),t("a",{attrs:{href:"https://sermant.io/en/document/user-guide/configuration-center.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sermant Dynamic Configuration Center User Manual"),t("OutboundLink")],1),e._v(" .")])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Dynamic configuration service implementation type")]),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigServiceType.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigServiceType"),t("OutboundLink")],1),e._v(", contains:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Enum")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Explanation")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("ZOOKEEPER")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("ZooKeeper")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("KIE")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("ServiceComb Kie")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("NOP")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("No implementation")])])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Dynamic configuration listener")]),e._v(" "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigListener.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigListener"),t("OutboundLink")],1),e._v(", which contains the following interface methods:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Method")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Explanation")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("void process("),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigEvent.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigEvent"),t("OutboundLink")],1),e._v(")")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Callback interface for handling change events of configuration")])])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Change events of dynamic configuration")]),e._v(" "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigEvent.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigEvent"),t("OutboundLink")],1),e._v(", whose member properties are as follows:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Type")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Property")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Explanation")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("key")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Key of configuration")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("group")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Group of configuration")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("String")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("content")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Content of configuration")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigEventType.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigEventType"),t("OutboundLink")],1)]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("changeType")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Type of configuration change event")])])])])]),e._v(" "),t("li",[t("p",[t("strong",[e._v("Type of change events of dynamic configuration")]),e._v(" "),t("a",{attrs:{href:"https://github.com/huaweicloud/Sermant/blob/develop/sermant-agentcore/sermant-agentcore-core/src/main/java/com/huaweicloud/sermant/core/service/dynamicconfig/common/DynamicConfigEventType.java",target:"_blank",rel:"noopener noreferrer"}},[e._v("DynamicConfigEventType"),t("OutboundLink")],1),e._v(", which contains following four kinds:")]),e._v(" "),t("table",[t("thead",[t("tr",[t("th",{staticStyle:{"text-align":"left"}},[e._v("Enum")]),e._v(" "),t("th",{staticStyle:{"text-align":"left"}},[e._v("Explanation")])])]),e._v(" "),t("tbody",[t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("INIT")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Initial response when adding a listener")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("CREATE")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Event of adding new configuration")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("MODIFY")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Event of modifying configuration")])]),e._v(" "),t("tr",[t("td",{staticStyle:{"text-align":"left"}},[e._v("DELETE")]),e._v(" "),t("td",{staticStyle:{"text-align":"left"}},[e._v("Event of deleting configuration")])])])])])]),e._v(" "),t("h3",{attrs:{id:"dynamic-configuration-development-example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-configuration-development-example"}},[e._v("#")]),e._v(" Dynamic Configuration Development Example")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("DynamicConfigService")]),e._v(" instance of the dynamic configuration function can be obtained with the following code:")]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DynamicConfigService")]),e._v(" service "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ServiceManager")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("getService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DynamicConfigService")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),t("p",[e._v("Once the service instance is obtained, you can invoke the API listed in the table above to take the appropriate action. For example, to register a listener, you can do this by:")]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ${group} is user group，${key} is the key listened. For zookeeper, the path is: / + ${group} + ${key}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// if ${group} do not exist，it will set the value by dynamicconfig.default_group in unified configuration")]),e._v("\nservice"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("addConfigListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"${key}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"${group}"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("DynamicConfigListener")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[e._v("@Override")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("public")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("void")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("process")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("ConfigChangedEvent")]),e._v(" event"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// do something")]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),t("p",[e._v("Once the listener is registered, the "),t("code",[e._v("process")]),e._v(" method will be triggered when the server creates, deletes, modifies, or adds child nodes.")]),e._v(" "),t("p",[e._v("Examples of other interfaces are not listed here, you can refer to the API description above.")])])}),[],!1,null,null,null);t.default=r.exports}}]);